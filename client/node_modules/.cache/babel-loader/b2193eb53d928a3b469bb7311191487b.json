{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { omit } from \"lodash\";\nimport Cookies from \"universal-cookie\";\nconst cookies = new Cookies();\nconst isAuthed = cookies.get(\"isAuthed\");\nexport const useContact = () => {\n  _s();\n\n  const [values, setValues] = useState({});\n  const [errors, setErrors] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  useEffect(() => {\n    setSubmitted(false);\n  }, [values]);\n\n  const validate = (name, value) => {\n    switch (name) {\n      case \"username\":\n        if (value.length <= 1) {\n          setErrors({ ...errors,\n            username: \"Your name must contain at least 2 letters\"\n          });\n        } else {\n          let newObj = omit(errors, \"username\");\n          setErrors(newObj);\n        }\n\n        break;\n\n      case \"email\":\n        if (!new RegExp(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/).test(value)) {\n          setErrors({ ...errors,\n            email: \"Please enter a valid email (ex: johndoe@email.com)\"\n          });\n        } else {\n          let newObj = omit(errors, \"email\");\n          setErrors(newObj);\n        }\n\n        break;\n      // default:\n      // break;\n    }\n  };\n\n  const handleChange = e => {\n    e.persist();\n    let name = e.target.name;\n    let val = e.target.value;\n    validate(name, val);\n    setValues({ ...values,\n      [name]: val\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (Object.keys(errors).length === 0) {\n      setSubmitted(true);\n      console.log(\"Form Values: \", values);\n\n      try {\n        await axios.post(\"http://localhost:8080/api/auth\");\n        await axios.post(\"http://localhost:8080/api/save\", values, {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          withCredentials: true\n        });\n        setSubmitted(true);\n      } catch (error) {\n        setErrors(error.message); // if (error.response.status === 401) {\n        //   window.location.reload();\n        //   alert(\n        //     \"Your session expired before submitting the form - reauthentication successful. Please resubmit the form.\"\n        //   );\n        //   return;\n        // }\n        // if (error.response.status === 403) {\n        //   alert(\"Forbidden\");\n        //   window.location.reload();\n        // } else {\n        //   alert(\"An internal server error occurred.\");\n        //   window.location.reload();\n        // }\n      } finally {\n        alert(\"Your response was submitted, thank you for reaching out!\");\n        window.location.reload();\n        console.log(\"Data has been sent to the server\");\n      }\n    } else {\n      alert(\"Form was not submitted. Make sure required fields were filled correctly.\");\n    }\n  };\n\n  return {\n    values,\n    errors,\n    submitted,\n    validate,\n    setValues,\n    handleChange,\n    handleSubmit\n  };\n};\n\n_s(useContact, \"WIHcVG62ike2fy7xBNWzW8tF3lc=\");","map":{"version":3,"sources":["/Users/chritsophersarmiento/git/my-portfolio/src/hooks/useContact.js"],"names":["useState","useEffect","axios","omit","Cookies","cookies","isAuthed","get","useContact","values","setValues","errors","setErrors","submitted","setSubmitted","validate","name","value","length","username","newObj","RegExp","test","email","handleChange","e","persist","target","val","handleSubmit","preventDefault","Object","keys","console","log","post","headers","withCredentials","error","message","alert","window","location","reload"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { omit } from \"lodash\";\nimport Cookies from \"universal-cookie\";\n\nconst cookies = new Cookies();\nconst isAuthed = cookies.get(\"isAuthed\");\n\nexport const useContact = () => {\n  const [values, setValues] = useState({});\n  const [errors, setErrors] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n\n  useEffect(() => {\n    setSubmitted(false);\n  }, [values]);\n\n  const validate = (name, value) => {\n    switch (name) {\n      case \"username\":\n        if (value.length <= 1) {\n          setErrors({\n            ...errors,\n            username: \"Your name must contain at least 2 letters\",\n          });\n        } else {\n          let newObj = omit(errors, \"username\");\n          setErrors(newObj);\n        }\n        break;\n\n      case \"email\":\n        if (\n          !new RegExp(\n            /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n          ).test(value)\n        ) {\n          setErrors({\n            ...errors,\n            email: \"Please enter a valid email (ex: johndoe@email.com)\",\n          });\n        } else {\n          let newObj = omit(errors, \"email\");\n          setErrors(newObj);\n        }\n        break;\n      // default:\n      // break;\n    }\n  };\n\n  const handleChange = (e) => {\n    e.persist();\n\n    let name = e.target.name;\n    let val = e.target.value;\n\n    validate(name, val);\n\n    setValues({\n      ...values,\n      [name]: val,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (Object.keys(errors).length === 0) {\n      setSubmitted(true);\n      console.log(\"Form Values: \", values);\n      try {\n        await axios.post(\"http://localhost:8080/api/auth\");\n        await axios.post(\"http://localhost:8080/api/save\", values, {\n          headers: { \"Content-Type\": \"application/json\" },\n          withCredentials: true,\n        });\n        setSubmitted(true);\n      } catch (error) {\n        setErrors(error.message);\n        // if (error.response.status === 401) {\n        //   window.location.reload();\n        //   alert(\n        //     \"Your session expired before submitting the form - reauthentication successful. Please resubmit the form.\"\n        //   );\n        //   return;\n        // }\n        // if (error.response.status === 403) {\n        //   alert(\"Forbidden\");\n        //   window.location.reload();\n        // } else {\n        //   alert(\"An internal server error occurred.\");\n        //   window.location.reload();\n        // }\n      } finally {\n        alert(\"Your response was submitted, thank you for reaching out!\");\n        window.location.reload();\n        console.log(\"Data has been sent to the server\");\n      }\n    } else {\n      alert(\n        \"Form was not submitted. Make sure required fields were filled correctly.\"\n      );\n    }\n  };\n\n  return {\n    values,\n    errors,\n    submitted,\n    validate,\n    setValues,\n    handleChange,\n    handleSubmit,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}